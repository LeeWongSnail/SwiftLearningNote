# Basic Operators

运算符，Swift支持C语言中你知道的运算符，同时还新增了一些表示范围的运算符例如a..b和a..<b用来表示一个范围的运算符。

Swift对C中的一些运算符做了改进，比如“=”运算符不再有返回值(没有返回值可以理解为=就是一个赋值操作，没有返回值表示 无法根据=结果作为条件)，对于基本运算符(+-*/)做了溢出判断。

## 术语

运算符包含一元运算符、二元运算符、三元运算符。 分别对应运算符需要几个运算对象。

## 赋值运算符

当赋值运算符右边是一个元组时，他的元素可以被分解成多个变量

```swift
let (x, y) = (1, 2)
// 现在 x 等于 1，y 等于 2
```

赋值运算符没有任何返回值

```swift
if x = y {
    // 此句错误，因为 x = y 并不返回任何值
}
```

这样也能避免我们将==误写为=

## 算数运算符

除了正常使用的加减乘除四则运算，Swift还提供了溢出运算符，当向一个整数类型的常量或者变量赋予超过它容量的值时，Swift 默认会报错，而不是允许生成一个无效的数。这个行为为我们在运算过大或者过小的数时提供了额外的安全性。

对于溢出运算符后面会有更详细的说明，这里暂时不展开。

### 加法运算符

加法运算符除了适用于数字间的运算，在Swift中还可以用于拼接两个字符串

```swift
"hello, " + "world"  // 等于 "hello, world"
```

### 求余运算符

在其他语言中我们也称%为取模，a%b 即

```swift
a = (b × 倍数) + 余数
```

因此对于正数或者负数来说

```swift
9 % 4 => 9 = (4 × 2) + 1    // 等于 1
-9 % 4 => -9 = (4 × -2) + -1   // 等于 -1
```

### 一元运算符

一元运算符包含: + (正一元运算符) 和 - (负一元运算符) 以及组合运算符(-=/+=)

一元正号运算符(+): 不做任何改变地返回操作数的值—-有返回值

一元负号运算符(-): 将原操作数的值取反并返回—-有返回值

组合运算符(+=/-=): 组合运算符就是将两个运算组合起来(-= 减法和赋值/ += 加法和赋值)

 注意：组合运算符没有返回值，因此下面的代码

```swift
let b = a += 2
// 组合运算符是没有返回值的 所以没办法给b赋值 因此这么写是错误的
```

### 比较运算符

比较运算符即常用的:等于(=)、不等于(≠)、大于(>)、小于(<)、大于等于(≥)、小于等于(≤)。

比较运算符不止适用于数字之间比较大小关系，还适用于比较元组之间的大小关系

```swift
(1, "zebra") < (2, "apple")   // true，因为 1 小于 2
(3, "apple") < (3, "bird")    // true，因为 3 等于 3，但是 apple 小于 bird
(4, "dog") == (4, "dog")      // true，因为 4 等于 4，dog 等于 dog
```

元组可以被比较的前提是，两个元组的元素相同且元素的个数相同，同时元组的元素是可以被比较的(如果元素中的元素有布尔值，但是布尔值无法被比较，因此这种数据是无法被比较的)

```swift
("blue", -1) < ("purple", 1)       // 正常，比较的结果为 true
("blue", false) < ("purple", true) // 错误，因为 < 不能比较布尔类型
```

### 三元运算符

格式: 

```swift
问题 ? 答案 1 : 答案 2
```

三元运算符为我们提供了一个比较便捷的表达形式，但是要注意不能将三元运算符滥用，尤其是判断条件 不能过于复杂，不然会大大降低代码的可读性。

### 空合运算符（Nil Coalescing Operator）

空合运算符（a ?? b）将对可选类型 a 进行空判断，如果 a 包含一个值就进行解包，否则就返回一个默认值 b。表达式 a 必须是 Optional 类型。默认值 b 的类型必须要和 a 存储值的类型保持一致。

示例:

```swift
a != nil ? a! : b
```

相当于如果a为nil则给a设置一个默认值，但是要注意，如果a有值 则b不会被计算

## 区间运算符

### 闭区间运算符

闭区间运算符（a...b）定义一个包含从 a 到 b（包括 a 和 b）的所有值的区间。a 的值不能超过 b。

```swift
for index in 1...5 {
    print("\(index) * 5 = \(index * 5)")
}
// 1 * 5 = 5
// 2 * 5 = 10
// 3 * 5 = 15
// 4 * 5 = 20
// 5 * 5 = 25
```

### 半开区间运算符

半开区间运算符（a..<b）定义一个从 a 到 b 但不包括 b 的区间。 之所以称为半开区间，是因为该区间包含第一个值而不包括最后的值。

```swift
let names = ["Anna", "Alex", "Brian", "Jack"]
let count = names.count
for i in 0..<count {
    print("第 \(i + 1) 个人叫 \(names[i])")
}
// 第 1 个人叫 Anna
// 第 2 个人叫 Alex
// 第 3 个人叫 Brian
// 第 4 个人叫 Jack
```

### 单侧区间

闭区间操作符有另一个表达形式，可以表达往一侧无限延伸的区间 —— 例如，一个包含了数组从索引 2 到结尾的所有值的区间。在这些情况下，你可以省略掉区间操作符一侧的值。这种区间叫做单侧区间，因为操作符只有一侧有值。

```swift
for name in names[2...] {
    print(name)
}
// Brian
// Jack

for name in names[...2] {
    print(name)
}
// Anna
// Alex
// Brian

for name in names[..<2] {
    print(name)
}
// Anna
// Alex
```

单侧区间不止可以在下标里使用，也可以在别的情境下使用。你不能遍历省略了初始值的单侧区间，因为遍历的开端并不明显。你可以遍历一个省略最终值的单侧区间；然而，由于这种区间无限延伸的特性，请保证你在循环里有一个结束循环的分支。你也可以查看一个单侧区间是否包含某个特定的值，就像下面展示的那样。

```swift
let range = ...5
range.contains(7)   // false
range.contains(4)   // true
range.contains(-1)  // true
```

## 逻辑运算符

逻辑运算符 即常见的:与(&) 或(||)  非(!) 

逻辑与运算符: 当运算符两边都是true时才为true

逻辑或运算符:当运算符两边有一个为true时，就为true

逻辑非运算符: 运算符为true 取非后为false

注意:这里引入了短路计算（short-circuit evaluation)的概念，比如在与运算中如果第一个对象为false则不再去判断第二个对象，因为无论结果如何都不需要在执行。对于在或运算中如果第一个对象的值为true则不再去判断第二个对象，因为无论如何结果都为true。

### 逻辑运算符组合

一个比较复杂的条件可能会用到将这几个逻辑运算符组合到一起

```swift
if enteredDoorCode && passedRetinaScan || hasDoorKey || knowsOverridePassword {
    print("Welcome!")
} else {
    print("ACCESS DENIED")
}
// 输出“Welcome!”
```

Swift 逻辑操作符 && 和 || 是左结合的，这意味着拥有多元逻辑操作符的复合表达式优先计算最左边的子表达式。

在使用逻辑运算符组合时，我们应该通过添加括号的方式控制运算的优先级

```swift
if (enteredDoorCode && passedRetinaScan) || hasDoorKey || knowsOverridePassword {
    print("Welcome!")
} else {
    print("ACCESS DENIED")
}
// 输出“Welcome!”
```

同时代码的可读性也较高。



